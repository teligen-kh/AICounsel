# AI 상담사 파인튜닝용 CSV 데이터 표준 규격

## 1. 기본 구조

### 필수 컬럼
- **요청내용**: 고객의 문의/질문 내용
- **처리내용**: 상담사의 답변/응답 내용

### 예시
```csv
요청내용,처리내용
"포스에서 결제가 안돼요","인터넷 연결을 확인해주세요. 네트워크 문제일 수 있습니다."
"영수증 출력이 안됩니다","프린터 연결 상태와 용지를 확인해주세요."
```

## 2. 데이터 형식 규칙

### 2.1 텍스트 인코딩
- **인코딩**: UTF-8 (한글 지원 필수)
- **줄바꿈**: Windows (CRLF) 또는 Unix (LF) 모두 허용

### 2.2 필드 구분자
- **기본 구분자**: 쉼표 (,)
- **대안 구분자**: 세미콜론 (;) - 쉼표가 포함된 데이터의 경우

### 2.3 텍스트 감싸기 규칙

#### 필수로 따옴표로 감싸야 하는 경우:
1. **쉼표가 포함된 텍스트**
   ```csv
   "안녕하세요, 무엇을 도와드릴까요?","상담을 받고 싶어요."
   ```

2. **줄바꿈이 포함된 텍스트**
   ```csv
   "포스 설정 방법을 알려주세요","1단계: 관리자 모드로 진입\n2단계: 설정 메뉴 선택\n3단계: 원하는 설정 변경"
   ```

3. **따옴표가 포함된 텍스트**
   ```csv
   "고객이 '비밀번호를 잊어버렸어요'라고 합니다","비밀번호 재설정을 도와드리겠습니다."
   ```

4. **특수문자가 포함된 텍스트**
   ```csv
   "가격이 10,000원에서 12,000원으로 올랐어요","가격 인상에 대해 안내드리겠습니다."
   ```

#### 따옴표 사용 방법:
- **외부 따옴표**: 큰따옴표 (")
- **내부 따옴표**: 큰따옴표 두 번 사용 ("")
   ```csv
   "고객이 ""비밀번호를 잊어버렸어요""라고 합니다","비밀번호 재설정을 도와드리겠습니다."
   ```

## 3. 데이터 품질 규칙

### 3.1 필수 사항
- **빈 값 금지**: 요청내용과 처리내용 모두 반드시 입력
- **최소 길이**: 각 필드 최소 1자 이상
- **최대 길이**: 각 필드 최대 2000자 (권장)

### 3.2 권장 사항
- **자연스러운 대화**: 고객과 상담사 간의 자연스러운 대화 형태
- **구체적인 답변**: 추상적이지 않고 구체적이고 실용적인 답변
- **친근한 톤**: 공손하면서도 친근한 상담사 톤 유지

## 4. 데이터 검증 체크리스트

### 4.1 형식 검증
- [ ] UTF-8 인코딩 확인
- [ ] 모든 행이 2개 필드로 구성
- [ ] 쉼표가 포함된 텍스트는 따옴표로 감쌈
- [ ] 줄바꿈이 포함된 텍스트는 따옴표로 감쌈
- [ ] 빈 행이 없음

### 4.2 내용 검증
- [ ] 요청내용이 비어있지 않음
- [ ] 처리내용이 비어있지 않음
- [ ] 각 답변이 해당 질문에 적절함
- [ ] 상담사 톤이 일관성 있음

## 5. 문제 해결 가이드

### 5.1 일반적인 오류

#### "Expected 2 fields in line X, saw Y"
- **원인**: 해당 행의 필드 개수가 2개가 아님
- **해결**: 쉼표가 포함된 텍스트를 따옴표로 감싸기

#### "UnicodeDecodeError"
- **원인**: 인코딩이 UTF-8이 아님
- **해결**: 파일을 UTF-8로 저장

#### "Empty field"
- **원인**: 빈 필드가 있음
- **해결**: 모든 필드에 내용 입력

### 5.2 데이터 전처리 도구

#### 쉼표 문제 해결 스크립트
```python
import csv

def fix_csv_commas(input_file, output_file):
    """CSV 파일의 쉼표 문제를 해결하는 함수"""
    with open(input_file, 'r', encoding='utf-8') as infile:
        with open(output_file, 'w', encoding='utf-8', newline='') as outfile:
            reader = csv.reader(infile)
            writer = csv.writer(outfile, quoting=csv.QUOTE_ALL)
            
            for row in reader:
                if len(row) >= 2:
                    # 모든 필드를 따옴표로 감싸기
                    writer.writerow([row[0], row[1]])
```

## 6. 예시 데이터

### 6.1 기본 예시
```csv
요청내용,처리내용
"포스 로그인이 안돼요","아이디와 비밀번호를 다시 확인해주세요. Caps Lock이 켜져있지 않은지도 확인해보세요."
"영수증 출력이 안됩니다","프린터 전원과 용지를 확인해주세요. USB 연결도 점검해보세요."
"상품 등록은 어떻게 하나요?","기초 > 상품 > 상품코드정보관리에서 등록 버튼을 클릭하시면 됩니다."
```

### 6.2 복잡한 예시 (쉼표 포함)
```csv
요청내용,처리내용
"가격이 10,000원에서 12,000원으로 올랐는데, 왜 그런가요?","원자재 가격 상승으로 인한 불가피한 가격 조정입니다. 양해 부탁드립니다."
"고객이 '비밀번호를 잊어버렸어요'라고 하는데, 어떻게 해야 하나요?","비밀번호 재설정을 도와드리겠습니다. 본인 인증 후 새 비밀번호로 변경 가능합니다."
```

## 7. 권장 도구

### 7.1 CSV 편집 도구
- **Google Sheets**: 온라인에서 쉼표 문제 자동 처리
- **Excel**: 데이터 > 텍스트 나누기 기능 활용
- **Notepad++**: 정규식으로 쉼표 문제 해결

### 7.2 검증 도구
- **Python pandas**: `pd.read_csv()` 로 형식 검증
- **온라인 CSV 검증기**: 형식 오류 자동 감지

---

**주의사항**: 이 규격을 준수하지 않으면 파인튜닝 과정에서 오류가 발생할 수 있습니다. 데이터 추가/수정 시 반드시 이 규격을 확인하세요. 